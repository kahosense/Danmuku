# 产品简介

## 背景
- 弹幕在长时间播放（≥30 分钟）内易出现词句重复、节奏刻板、语气趋同的问题，导致真实感下降。
- 现有方案主要依赖提示工程与轻量随机扰动，缺乏系统级硬约束与监控闭环。

## 目标
1. 通过运行时策略引擎，持续抑制重复与模板化输出，保障长时观看体验。
2. 引入分布与状态调节，让弹幕节奏、长度、语域呈现“有人味”的自然波动。
3. 建立可观测指标与日志，支持 A/B 验证与快速回退。

## 成功指标
- 语义重复率（cos > 0.9）< 6%（10 分钟滑窗）。
- n-gram 冲突率 < 4%。
- 句式熵、主题熵相较基线提升 ≥ 12%-15%。
- 超长率（>20 词）< 3%，短噪率（<4 词）< 8%。
- 若有用户反馈信号，隐藏/举报率稳定或下降。

## 非目标
- 不覆盖整体 UI/交互层的改造。
- 不涉及新增 LLM 模型或跨模型调度。
- 不在此阶段处理大规模 prompt 结构重写（仍使用现有 prompt 构建流程）。

## 关键里程碑
1. **M1：硬去重与候选 rerank**（已完成）
2. **M2：长度/节奏分布与能量状态机**
3. **M3：口头禅 & 动态禁词频控、tone 参数化、few-shot 采样冷却**
4. **M4：监控面板与 A/B 验证上线**

## 风险与对策
- **现网性能风险**：去重与打分需保持子毫秒级；通过 Trie/哈希+近似算法、worker 异步化解决。
- **策略互相抵消**：引入最低出声率、退让层级避免“沉默雪崩”。
- **调参难度**：通过指标面板和日志钩子快速回溯，必要时提供配置开关。
